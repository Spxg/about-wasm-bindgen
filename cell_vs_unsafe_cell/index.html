<!DOCTYPE html>
<html>
<body>
  <script src="
https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js
"></script>
  <script src="
https://cdn.jsdelivr.net/npm/platform@1.3.6/platform.min.js
"></script>
  <script src="
https://cdn.jsdelivr.net/npm/benchmark@2.1.4/benchmark.min.js
"></script>

  <script>
    async function test() {
      const response = await fetch('target/wasm32-unknown-unknown/release/cell_vs_unsafe_cell.wasm');
      const bytes = await response.arrayBuffer();

      const suite = new Benchmark.Suite;
      const { instance } = await WebAssembly.instantiate(bytes);

      suite.add("set", () => {
        instance.exports.set(0);
      });

      suite.on('cycle', function(event) {
        console.log(event);
      });

      suite.run();
    }

    test();
  </script>
</body>
</html>
